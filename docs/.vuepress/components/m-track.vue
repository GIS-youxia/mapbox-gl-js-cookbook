<template>
  <base-map :map-options="mapOptions" @load="handleMapLoaded"/>
</template>

<script>
import baseMap from './base-map'
import addTrackLayer from '../snippet/track'
export default {
  components: {
    baseMap
  },
  data () {
    return {
      mapOptions: {
        center: [106.56272183918276, 29.557833499498457],
        zoom: 13.5
      }
    }
  },
  methods: {
    handleMapLoaded (map) {
      map.loadImage(this.$withBase(`/images/arrow.png`), (error, image) => {
        if (error) throw error
        map.addImage('arrow', image)
        /* eslint-disable */
        const data = {"type":"FeatureCollection","name":"track","features":[{"type":"Feature","properties":{"instruction":"沿中山三路向北步行286米向右前方行走","orientation":"(1:北)","road":"中山三路","distance":"286","duration":"229","action":"(1:向右前方行走)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.545608,29.555456],[106.545608,29.555586],[106.545686,29.555869],[106.545686,29.555869],[106.545686,29.555882],[106.545686,29.555882],[106.545716,29.556029],[106.545716,29.556029],[106.545808,29.556541],[106.545808,29.556541],[106.545855,29.556789],[106.545855,29.556789],[106.54586,29.556845],[106.54586,29.556845],[106.545946,29.557192],[106.545946,29.557192],[106.54599,29.557414],[106.54599,29.557414],[106.546107,29.558039]]}},{"type":"Feature","properties":{"instruction":"沿中山支路向东北步行37米向右前方行走","orientation":"(1:东北)","road":"中山支路","distance":"37","duration":"30","action":"(1:向右前方行走)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.546107,29.558039],[106.546182,29.558099],[106.546182,29.558099],[106.54626,29.558169],[106.546425,29.558244]]}},{"type":"Feature","properties":{"instruction":"沿中山支路向东南步行298米向左前方行走","orientation":"(1:东南)","road":"中山支路","distance":"298","duration":"238","action":"(1:向左前方行走)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.546425,29.558244],[106.546616,29.558239],[106.546786,29.558174],[106.546786,29.558174],[106.547021,29.558019],[106.547021,29.558019],[106.547964,29.5574],[106.547964,29.5574],[106.548664,29.556929],[106.548664,29.556929],[106.548826,29.556773],[106.548826,29.556773],[106.548882,29.556664]]}},{"type":"Feature","properties":{"instruction":"沿枇杷山正街向东南步行175米","orientation":"(1:东南)","road":"枇杷山正街","distance":"175","duration":"140","action":"(0:)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.548882,29.55666],[106.549086,29.556622],[106.549164,29.556587],[106.549247,29.556514],[106.549361,29.556315],[106.549391,29.556206],[106.549382,29.556146],[106.549335,29.556076],[106.549203,29.555945],[106.549199,29.555884],[106.549208,29.555836],[106.549278,29.555794],[106.549361,29.555777],[106.549712,29.555772]]}},{"type":"Feature","properties":{"instruction":"沿枇杷山正街向东步行844米直行","orientation":"(1:东)","road":"枇杷山正街","distance":"844","duration":"675","action":"(1:直行)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.549712,29.555768],[106.550086,29.555786],[106.550086,29.555786],[106.550456,29.555744],[106.550791,29.555671],[106.551282,29.555533],[106.55173,29.555382],[106.552161,29.555188],[106.552235,29.555166],[106.552709,29.555154],[106.552969,29.555133],[106.552969,29.555133],[106.553504,29.555016],[106.553504,29.555016],[106.554026,29.554913],[106.554269,29.554893],[106.554351,29.55491],[106.554895,29.555102],[106.554895,29.555102],[106.555386,29.555277],[106.555386,29.555277],[106.555529,29.555337],[106.555529,29.555337],[106.555873,29.555512],[106.555873,29.555512],[106.556669,29.555925],[106.556991,29.556112],[106.556991,29.556112],[106.557373,29.556425],[106.557447,29.556473],[106.557625,29.556534],[106.55776,29.556564],[106.55776,29.556564],[106.55779,29.556574]]}},{"type":"Feature","properties":{"instruction":"沿兴隆街向东步行511米右转","orientation":"(1:东)","road":"兴隆街","distance":"511","duration":"409","action":"(1:右转)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.55779,29.556574],[106.557869,29.556613],[106.557869,29.556613],[106.558103,29.556665],[106.558103,29.556665],[106.558447,29.556701],[106.558807,29.556701],[106.558807,29.556701],[106.55919,29.556719],[106.559333,29.556741],[106.55942,29.556763],[106.559685,29.556889],[106.559685,29.556889],[106.559998,29.557067],[106.560181,29.557163],[106.560319,29.557225],[106.560319,29.557225],[106.560559,29.557311],[106.560724,29.557333],[106.56135,29.557325],[106.56181,29.557335],[106.561932,29.557366],[106.562167,29.557457],[106.562315,29.557549],[106.562727,29.55784]]}},{"type":"Feature","properties":{"instruction":"沿和平路向东步行737米右转","orientation":"(1:东)","road":"和平路","distance":"737","duration":"590","action":"(1:右转)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.562727,29.55784],[106.563145,29.557459],[106.563275,29.557398],[106.563275,29.557398],[106.563788,29.557021],[106.563788,29.557021],[106.564001,29.556848],[106.564079,29.55681],[106.564079,29.55681],[106.564283,29.556736],[106.564431,29.556714],[106.564431,29.556714],[106.565069,29.556654],[106.565069,29.556654],[106.565169,29.556646],[106.565169,29.556646],[106.565247,29.556641],[106.565247,29.556641],[106.565986,29.556556],[106.565986,29.556556],[106.566134,29.556544],[106.566134,29.556544],[106.566569,29.556487],[106.566569,29.556487],[106.566751,29.556466],[106.566751,29.556466],[106.567264,29.556375],[106.567264,29.556375],[106.567759,29.556255],[106.567759,29.556255],[106.568019,29.556194],[106.568019,29.556194],[106.568142,29.556165],[106.568142,29.556165],[106.568324,29.556091],[106.568324,29.556091],[106.568524,29.556026],[106.568524,29.556026],[106.568754,29.555969],[106.56901,29.555962],[106.56901,29.555962],[106.569136,29.555949],[106.569136,29.555949],[106.56941,29.555927],[106.56941,29.555927],[106.569623,29.555906],[106.569623,29.555906],[106.569836,29.555897]]}},{"type":"Feature","properties":{"instruction":"沿新华路步行1141米向右前方行走","orientation":"(0:)","road":"新华路","distance":"1141","duration":"913","action":"(1:向右前方行走)","assistant_action":"(0:)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.569836,29.555893],[106.569853,29.555858],[106.569853,29.555858],[106.569927,29.555802],[106.569966,29.555785],[106.570096,29.555741],[106.570096,29.555741],[106.570249,29.555663],[106.570401,29.555599],[106.570401,29.555599],[106.570631,29.55546],[106.570631,29.55546],[106.5708,29.555378],[106.570974,29.555313],[106.571226,29.555283],[106.571377,29.555283],[106.571377,29.555283],[106.572576,29.555445],[106.572576,29.555445],[106.572725,29.555493],[106.57299,29.555628],[106.573671,29.556027],[106.573671,29.556027],[106.573962,29.556192],[106.573962,29.556192],[106.574341,29.556428],[106.574579,29.556606],[106.574874,29.556866],[106.574874,29.556866],[106.574905,29.556892],[106.574922,29.556909],[106.574922,29.556909],[106.575413,29.557366],[106.575413,29.557366],[106.57579,29.5579],[106.57579,29.5579],[106.576334,29.558642],[106.576334,29.558642],[106.576351,29.558729],[106.576907,29.559554],[106.576907,29.559554],[106.577015,29.559658],[106.577015,29.559658],[106.577397,29.560061],[106.577397,29.560061],[106.577519,29.560171],[106.577519,29.560171],[106.57774,29.560284],[106.57774,29.560284],[106.57787,29.560345],[106.57787,29.560345],[106.578026,29.560453],[106.578188,29.560635],[106.578188,29.560635],[106.578297,29.560774],[106.578297,29.560774],[106.57844,29.560952],[106.578557,29.561035]]}},{"type":"Feature","properties":{"instruction":"沿新华路向东北步行259米到达目的地","orientation":"(1:东北)","road":"新华路","distance":"259","duration":"207","action":"(0:)","assistant_action":"(1:到达目的地)","walk_type":"0"},"geometry":{"type":"LineString","coordinates":[[106.578557,29.561035],[106.578587,29.561043],[106.578587,29.561043],[106.5788,29.561113],[106.5788,29.561113],[106.579,29.561221],[106.579082,29.561295],[106.57916,29.561399],[106.579403,29.561826],[106.579403,29.561826],[106.579525,29.562034],[106.579746,29.562572],[106.579746,29.562572],[106.579798,29.562702],[106.579798,29.562702],[106.579902,29.562958]]}}]}
        addTrackLayer(map, data)
      })
    }
  }
}
</script>
